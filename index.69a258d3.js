function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var e,t=document.querySelector(".game-field"),n=document.querySelector(".game-score"),o=document.querySelector(".start"),a=document.createElement("button"),i=0,c=!1;function u(){e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(var r=0;r<4;r++)for(var n=0;n<4;n++){var o=e[r][n],a=document.createElement("div");a.className="field-cell",a.id=r.toString()+"-"+n.toString(),a=f(a,o),t.append(a)}}function l(){if(d())for(var r=!1;!r;){var t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===e[t][n]){var o=.1>Math.random()?4:2;e[t][n]=o;var a=document.getElementById(t.toString()+"-"+n.toString());a.innerText=o,a.classList.value+=" field-cell--".concat(o),r=!0}}}function d(){for(var r=0;r<4;r++)for(var t=0;t<4;t++)if(0===e[r][t])return!0;return!1}function f(r,t,n){return r.innerText="",r.className="",r.className="field-cell",r.classList.value+=" field-cell--".concat(t),t>0&&(r.innerText=t),2048===t?document.querySelector(".message-win").classList.remove("hidden"):d()||function(){for(var r=0;r<4;r++)for(var t=0;t<3;t++)if(e[r][t]===e[r][t+1])return!0;for(var n=0;n<4;n++)for(var o=0;o<3;o++)if(e[o][n]===e[o+1][n])return!0;return!1}()||document.querySelector(".message-lose").classList.remove("hidden"),r}window.onload=u(),document.addEventListener("click",function(r){r.target===o&&(l(),l(),document.querySelector(".message-start").classList.add("hidden"),document.querySelector(".button").classList.add("hidden")),r.target===a&&(document.querySelectorAll(".field-cell").forEach(function(r){return r.remove()}),document.querySelector(".message-lose").classList.add("hidden"),n.textContent=0,u(),l(),l())});var s={ArrowLeft:!1,ArrowRight:!1,ArrowUp:!1,ArrowDown:!1};function m(r){return r.filter(function(r){return 0!==r})}function v(e){var t=function(e){if(Array.isArray(e))return r(e)}(e)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=e;n=m(n);for(var o=0;o<n.length-1;o++)n[o]===n[o+1]&&(n[o]*=2,n[o+1]=0,i+=n[o]);for(n=m(n);n.length<4;)n.push(0);return function(r,e){if(r.length!==e.length)return!0;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!0;return!1}(t,n)&&(c=!0),n}document.addEventListener("keydown",function(r){var t;t=r.key,!Object.values(s).some(function(r){return!0===r})&&s.hasOwnProperty(t)&&(document.querySelector(".controls").append(a),a.innerText="restart",a.classList="button restart",s[t]=!0),c=!1,"ArrowLeft"===r.code?function(){for(var r=0;r<4;r++){var t=e[r];t=v(t),e[r]=t;for(var n=0;n<4;n++)f(document.getElementById(r.toString()+"-"+n.toString()),e[r][n])}}():"ArrowRight"===r.code?function(){for(var r=0;r<4;r++){var t=e[r];t.reverse(),(t=v(t)).reverse(),e[r]=t;for(var n=0;n<4;n++)f(document.getElementById(r.toString()+"-"+n.toString()),e[r][n])}}():"ArrowUp"===r.code?function(){for(var r=0;r<4;r++){var t=[e[0][r],e[1][r],e[2][r],e[3][r]];t=v(t);for(var n=0;n<4;n++)e[n][r]=t[n],f(document.getElementById(n.toString()+"-"+r.toString()),e[n][r])}}():"ArrowDown"===r.code&&function(){for(var r=0;r<4;r++){var t=[e[0][r],e[1][r],e[2][r],e[3][r]];t.reverse(),(t=v(t)).reverse();for(var n=0;n<4;n++){var o=document.getElementById(n.toString()+"-"+r.toString());e[n][r]=t[n],f(o,e[n][r])}}}(),c&&l(),n.textContent=i});
//# sourceMappingURL=index.69a258d3.js.map
