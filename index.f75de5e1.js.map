{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst gameField = document.querySelector('.game-field');\nconst gameScore = document.querySelector('.game-score');\nconst start = document.querySelector('.start');\nconst restart = document.createElement('button');\n\nconst rows = 4;\nconst columns = 4;\nlet board;\nlet score = 0;\nlet isBordChanged = false;\n\nwindow.onload = setGame();\n\ndocument.addEventListener('click', e => {\n  if (e.target === start) {\n    setTwo();\n    setTwo();\n\n    document.querySelector('.message-start').classList.add('hidden');\n    document.querySelector('.button').classList.add('hidden');\n  }\n\n  if (e.target === restart) {\n    const deleteFields = document.querySelectorAll('.field-cell');\n\n    deleteFields.forEach(el => el.remove());\n\n    document.querySelector('.message-lose').classList.add('hidden');\n\n    gameScore.textContent = 0;\n    setGame();\n    setTwo();\n    setTwo();\n  }\n});\n\nfunction setGame() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      const num = board[r][c];\n\n      let title = document.createElement('div');\n\n      title.className = 'field-cell';\n\n      title.id = r.toString() + '-' + c.toString();\n\n      title = updateClass(title, num);\n\n      gameField.append(title);\n    }\n  }\n}\n\nfunction setTwo() {\n  if (!hasEmptyTile()) {\n    return;\n  }\n\n  let found = false;\n\n  while (!found) {\n    const r = Math.floor(Math.random() * rows);\n    const c = Math.floor(Math.random() * columns);\n\n    if (board[r][c] === 0) {\n      const chooseValue = Math.random() < 0.1 ? 4 : 2;\n\n      board[r][c] = chooseValue;\n\n      const title = document.getElementById(r.toString() + '-' + c.toString());\n\n      title.innerText = chooseValue;\n      title.classList.value += ` field-cell--${chooseValue}`;\n\n      found = true;\n    }\n  }\n}\n\nfunction hasEmptyTile() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction hasSimiliarTile() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns - 1; c++) {\n      if (board[r][c] === board[r][c + 1]) {\n        return true;\n      }\n    }\n  }\n\n  for (let c = 0; c < columns; c++) {\n    for (let r = 0; r < rows - 1; r++) {\n      if (board[r][c] === board[r + 1][c]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction updateClass(title, num, e) {\n  title.innerText = '';\n  title.className = '';\n\n  title.className = 'field-cell';\n  title.classList.value += (` field-cell--${num}`);\n\n  if (num > 0) {\n    title.innerText = num;\n  }\n\n  if (num === 2048) {\n    const win = document.querySelector('.message-win');\n\n    win.classList.remove('hidden');\n  } else if (!hasEmptyTile() && !hasSimiliarTile()) {\n    const lose = document.querySelector('.message-lose');\n\n    lose.classList.remove('hidden');\n  }\n\n  return title;\n}\n\nconst isPressed = {\n  ArrowLeft: false,\n  ArrowRight: false,\n  ArrowUp: false,\n  ArrowDown: false,\n};\n\nfunction isFirstPressed(e) {\n  const key = e.key;\n\n  if (Object.values(isPressed).some(obj => obj === true)) {\n    return;\n  }\n\n  if (isPressed.hasOwnProperty(key)) {\n    document.querySelector('.controls').append(restart);\n\n    restart.innerText = 'restart';\n    restart.classList = 'button restart';\n\n    isPressed[key] = true;\n  }\n}\n\ndocument.addEventListener('keydown', e => {\n  isFirstPressed(e);\n\n  isBordChanged = false;\n\n  if (e.code === 'ArrowLeft') {\n    slideLeft();\n  } else if (e.code === 'ArrowRight') {\n    slideRight();\n  } else if (e.code === 'ArrowUp') {\n    slideUp();\n  } else if (e.code === 'ArrowDown') {\n    slideDown();\n  }\n\n  if (isBordChanged) {\n    setTwo();\n  }\n\n  gameScore.textContent = score;\n}\n);\n\nfunction deleteZero(row) {\n  return row.filter(num => num !== 0);\n};\n\nfunction arraysNotEqual(a, b) {\n  if (a.length !== b.length) {\n    return true;\n  }\n\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction slide(row) {\n  const originalRow = [...row];\n\n  let changeRow = row;\n\n  changeRow = deleteZero(changeRow);\n\n  for (let r = 0; r < changeRow.length - 1; r++) {\n    if (changeRow[r] === changeRow[r + 1]) {\n      changeRow[r] *= 2;\n      changeRow[r + 1] = 0;\n\n      score += changeRow[r];\n    }\n  }\n\n  changeRow = deleteZero(changeRow);\n\n  while (changeRow.length < columns) {\n    changeRow.push(0);\n  }\n\n  if (arraysNotEqual(originalRow, changeRow)) {\n    isBordChanged = true;\n  }\n\n  return changeRow;\n}\n\nfunction slideLeft() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n\n    row = slide(row);\n    board[r] = row;\n\n    for (let c = 0; c < columns; c++) {\n      const title = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateClass(title, num);\n    }\n  }\n}\n\nfunction slideRight() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n\n    row.reverse();\n    row = slide(row);\n\n    row.reverse();\n    board[r] = row;\n\n    for (let c = 0; c < columns; c++) {\n      const title = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateClass(title, num);\n    }\n  }\n}\n\nfunction slideUp() {\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row = slide(row);\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const title = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateClass(title, num);\n    }\n  }\n}\n\nfunction slideDown() {\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row.reverse();\n\n    row = slide(row);\n\n    row.reverse();\n\n    for (let r = 0; r < rows; r++) {\n      const title = document.getElementById(r.toString() + '-' + c.toString());\n\n      board[r][c] = row[r];\n\n      const num = board[r][c];\n\n      updateClass(title, num);\n    }\n  }\n};\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}